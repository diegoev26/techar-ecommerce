"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./_rollupPluginBabelHelpers-7d3a169b.js"),i=function(){function e(){this.invokerHookId=void 0}var i=e.prototype;return i.onFilesSelected=function(e){},i.onFilesSuccessfullySelected=function(e){},i.onFilesRejected=function(e){},i.onClear=function(){},i.onFileRemoved=function(e){},e}(),r=function(i){function r(e){var r;return(r=i.call(this)||this).limitAmountOfFilesConfig=void 0,r.limitAmountOfFilesConfig=e,r}e._inheritsLoose(r,i);var t=r.prototype;return t.validateBeforeParsing=function(e,i){var r=this.limitAmountOfFilesConfig,t=r.min,n=r.max;return n&&i.length>n?Promise.reject({name:"FileAmountLimitError",reason:"MAX_AMOUNT_OF_FILES_EXCEEDED"}):t&&i.length<t?Promise.reject({name:"FileAmountLimitError",reason:"MIN_AMOUNT_OF_FILES_NOT_REACHED"}):Promise.resolve()},t.validateAfterParsing=function(){return Promise.resolve()},r}(i),t=function(i){function r(e){var r;return(r=i.call(this)||this).fileSizeRestrictions=void 0,r.fileSizeRestrictions=e,r}e._inheritsLoose(r,i);var t=r.prototype;return t.validateBeforeParsing=function(){var i=e._asyncToGenerator(e._regeneratorRuntime().mark((function i(r,t){var o,s,a,u;return e._regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(o=this.fileSizeRestrictions).maxFileSize,(s=o.minFileSize)||a){e.next=3;break}return e.abrupt("return",Promise.resolve());case 3:return u=t.map((function(e){return n({minFileSize:s,maxFileSize:a,file:e})})).filter((function(e){return!!e})),e.abrupt("return",u.length>0?Promise.reject(u):Promise.resolve());case 5:case"end":return e.stop()}}),i,this)})));return function(e,r){return i.apply(this,arguments)}}(),t.validateAfterParsing=function(){var i=e._asyncToGenerator(e._regeneratorRuntime().mark((function i(r,t){return e._regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),i)})));return function(e,r){return i.apply(this,arguments)}}(),r}(i),n=function(e){var i=e.file,r=e.maxFileSize,t=e.minFileSize;return t&&i.size<t?{name:"FileSizeError",reason:"FILE_SIZE_TOO_SMALL",causedByFile:i}:r&&i.size>r?{name:"FileSizeError",reason:"FILE_SIZE_TOO_LARGE",causedByFile:i}:void 0},o=function(i){function r(e){var r;return(r=i.call(this)||this).imageSizeRestrictions=void 0,r.imageSizeRestrictions=e,r}e._inheritsLoose(r,i);var t=r.prototype;return t.validateBeforeParsing=function(){return Promise.resolve()},t.validateAfterParsing=function(e,i,r){return"DataURL"===e.readAs&&this.imageSizeRestrictions&&s(i.type)?a(i,r.result,this.imageSizeRestrictions):Promise.resolve()},r}(i),s=function(e){return e.startsWith("image")},a=function(e,i,r){return new Promise((function(t,n){var o=new Image,s={name:"ImageDimensionError",causedByFile:e,reasons:[]};o.onload=function(){var e=r.maxHeight,i=r.maxWidth,o=r.minHeight,a=r.minWidth,u=this.width,l=this.height;e&&e<l&&s.reasons.push("IMAGE_HEIGHT_TOO_BIG"),o&&o>l&&s.reasons.push("IMAGE_HEIGHT_TOO_SMALL"),i&&i<u&&s.reasons.push("IMAGE_WIDTH_TOO_BIG"),a&&a>u&&s.reasons.push("IMAGE_WIDTH_TOO_SMALL"),s.reasons.length?n(s):t()},o.onerror=function(){s.reasons.push("IMAGE_NOT_LOADED"),n(s)},o.src=i}))},u=function(i){function r(e){var r;return(r=i.call(this)||this).limitFilesConfig=void 0,r.previousPlainFiles=[],r.limitFilesConfig=e,r}e._inheritsLoose(r,i);var t=r.prototype;return t.onClear=function(){this.previousPlainFiles=[]},t.onFileRemoved=function(e){this.previousPlainFiles.splice(e,1)},t.validateBeforeParsing=function(e,i){var r=this.previousPlainFiles.length+i.length,t=this.limitFilesConfig,n=t.min,o=t.max;return o&&r>o?Promise.reject({name:"FileAmountLimitError",reason:"MAX_AMOUNT_OF_FILES_EXCEEDED"}):n&&r<n?Promise.reject({name:"FileAmountLimitError",reason:"MIN_AMOUNT_OF_FILES_NOT_REACHED"}):(this.previousPlainFiles=[].concat(this.previousPlainFiles,i),Promise.resolve())},t.validateAfterParsing=function(){return Promise.resolve()},r}(i);exports.FileAmountLimitValidator=r,exports.FileSizeValidator=t,exports.ImageDimensionsValidator=o,exports.PersistentFileAmountLimitValidator=u,exports.Validator=i;
//# sourceMappingURL=validators.cjs.production.min.js.map
